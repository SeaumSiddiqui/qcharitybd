# caddy/Caddyfile
qcharitybd.com, www.qcharitybd.com {
    # Serve SPA: proxy root requests to the internal nginx in qcbd-ui
    handle_path / {
        reverse_proxy qcbd_ui:80
    }

    # API proxy
    handle_path /api/* {
        reverse_proxy qcbd_api:5050
    }

    # Keycloak
    handle_path /auth/* {
        reverse_proxy keycloak:8080
    }

    # Optional: add header security via Caddy (simple example)
    header {
        Strict-Transport-Security "max-age=31536000; includeSubDomains"
        X-Frame-Options "SAMEORIGIN"
        X-Content-Type-Options "nosniff"
    }
}
