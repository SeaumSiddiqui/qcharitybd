qcharitybd.com, www.qcharitybd.com {

    # API proxy
    handle_path /api/* {
        reverse_proxy qcbd-api:5050
    }

    # Keycloak Admin Console (Keycloak 25+)
    handle_path /admin/* {
        reverse_proxy keycloak:8080
    }

    # Keycloak Realm + Auth endpoints
    handle_path /realms/* {
        reverse_proxy keycloak:8080
    }

    # Legacy /auth paths (optional but harmless)
    handle_path /auth/* {
        reverse_proxy keycloak:8080
    }

    # SPA (React)
    handle_path /* {
        reverse_proxy qcbd-ui:80
    }

    # Security headers
    header {
        Strict-Transport-Security "max-age=31536000; includeSubDomains"
        X-Frame-Options "SAMEORIGIN"
        X-Content-Type-Options "nosniff"
    }
}
